<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8" />
<title>Spojnice</title>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #1d3557, #457b9d);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #1d3557;
  }
  .game-container {
  background: #f1faee;
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.3);
  display: flex;
  gap: 15px; /* razmak između kolona */
  margin: 50px auto; /* centriranje */
  width: fit-content; /* širina kontejnera koliko treba za sadržaj */
}

  .column {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  .item {
    background: #ffffff;
    padding: 15px;
    border-radius: 10px;
    border: 2px solid #ccc;
    font-size: 18px;
    text-align: center;
    cursor: pointer;
    transition: 0.3s;
    user-select: none;
    min-width: 120px; /* ili 100px, možeš prilagoditi */
  }
  .item:hover {
    background: #a8dadc;
    border-color: #1d3557;
  }
  .item.correct {
    background: #4caf50;
    color: #fff;
    border-color: #4caf50;
    pointer-events: none;
  }
  .item.wrong {
    background: #e63946;
    color: #fff;
    border-color: #e63946;
  }
  #timer {
    position: fixed;
    top: 10px;
    right: 20px;
    font-size: 22px;
    font-weight: bold;
    color: #f1faee;
    padding: 8px 14px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.5);
    user-select: none;
  }
  #score {
    position: fixed;
    top: 10px;
    left: 20px;
    font-size: 22px;
    font-weight: bold;
    color: #f1faee;
    padding: 8px 14px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.5);
    user-select: none;
  }

  .modal {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    display: none;
    z-index: 99;
  }
  .modal-content {
    background: #f1faee;
    padding: 30px;
    border-radius: 20px;
    text-align: center;
    width: 300px;
  }
  .modal-content h2 {
    margin-bottom: 20px;
  }
  .modal-content button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: #457b9d;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
  }
  .modal-content button:hover {
    background: #1d3557;
  }
</style>
</head>
<body>

<div id="timer">90</div>
<div id="score">Bodovi: 0</div>

<div class="game-container">
  <div class="column" id="leftColumn"></div>
  <div class="column" id="rightColumn"></div>
</div>

<div class="modal" id="resultModal">
  <div class="modal-content">
    <h2>Kraj igre!</h2>
    <p id="finalScore"></p>
    <button id="btnToStart">Nazad na meni</button>
  </div>
</div>

<script>
  // Definicija 5 setova parova (po 8 sa 8)
const allSets = [
  {
    // Tipovi veza po grupama u periodnom sistemu
    left: ["Ia", "IIa", "IIIa", "IVa", "Va", "VIa", "VIIa", "VIIIa"],
    right: [
      "jonska veza", 
      "slaba jonska", 
      "kovalentna", 
      "neutralni", 
      "slabo bazni", 
      "slabo kiseli", 
      "jako kiseli", 
      "nema"
    ],
    pairs: {
      "Ia": "jonska veza",
      "IIa": "slaba jonska",
      "IIIa": "kovalentna",
      "IVa": "neutralni",
      "Va": "slabo bazni",
      "VIa": "slabo kiseli",
      "VIIa": "jako kiseli",
      "VIIIa": "nema"
    }
  },
  {
    // Boje elemenata
    left: ["Li", "Na", "K", "Rb", "Cs", "Mg", "Ca", "Ba"],
    right: [
      "karmin crveno", 
      "žuta", 
      "ljubičasta", 
      "crveno-ljubičasta", 
      "plavo-ljubičasta", 
      "blještavo", 
      "cigla crveno", 
      "žuto-zelena"
    ],
    pairs: {
      "Li": "karmin crveno",
      "Na": "žuta",
      "K": "ljubičasta",
      "Rb": "crveno-ljubičasta",
      "Cs": "plavo-ljubičasta",
      "Mg": "blještavo",
      "Ca": "cigla crveno",
      "Ba": "žuto-zelena"
    }
  },
  {
    // Upotreba elemenata
    left: ["Li", "Na", "Ra", "Tl", "As", "Sb", "Bi", "Se"],
    right: [
      "baterije", 
      "zračni jastuci", 
      "medicina", 
      "opadanje kose", 
      "koža, krzno", 
      "štamparski metal", 
      "osigurači", 
      "televizori"
    ],
    pairs: {
      "Li": "baterije",
      "Na": "zračni jastuci",
      "Ra": "medicina",
      "Tl": "opadanje kose",
      "As": "koža, krzno",
      "Sb": "štamparski metal",
      "Bi": "osigurači",
      "Se": "televizori"
    }
  },
  {
    // Hemijske formule sa indeksima i množenjem
    left: [
      "Pb(OH)₂×2PbCO₃", 
      "Al₂O₃×H₂O", 
      "MgCO₃×CaCO₃", 
      "KCl×MgCl₂×6H₂O", 
      "KAl(SO₄)₂×12H₂O", 
      "CuSO₄×5H₂O", 
      "FeSO₄×7H₂O", 
      "FeO×Cr₂O₃"
    ],
    right: [
      "bjelilo", 
      "boksit", 
      "dolomit", 
      "karnalit", 
      "stipsa", 
      "plava(modra) galica", 
      "zelena galica", 
      "hrom"
    ],
    pairs: {
      "Pb(OH)₂×2PbCO₃": "bjelilo",
      "Al₂O₃×H₂O": "boksit",
      "MgCO₃×CaCO₃": "dolomit",
      "KCl×MgCl₂×6H₂O": "karnalit",
      "KAl(SO₄)₂×12H₂O": "stipsa",
      "CuSO₄×5H₂O": "plava (modra) galica",
      "FeSO₄×7H₂O": "zelena galica",
      "FeO×Cr₂O₃": "hrom"
    }
  },
  {
    // Ostale hemijske supstance
    left: [
      "KCl", "KNO₃", "NaOH", "Na₂CO₃", "MgCO₃", "NaNO₃", "HCN", "SnO₂"
    ],
    right: [
      "silvin", "šalitra", "masna soda", "kamena soda", "magnezit", "čilska šalitra", "cijanidi", "kasiterit"
    ],
    pairs: {
      "KCl": "silvin",
      "KNO₃": "šalitra",
      "NaOH": "masna soda",
      "Na₂CO₃": "kamena soda",
      "MgCO₃": "magnezit",
      "NaNO₃": "čilska šalitra",
      "HCN": "cijanidi",
      "SnO₂": "kasiterit"
    }
  },
  {
    // Minerali i spojevi
    left: [
      "Pb₃O₄", "PbS", "NaAl₃F₆", "BH₃", "B₂H₆", "Fe₂O₃", "Fe₃O₄", "FS"
    ],
    right: [
      "minijum", "galenit", "kriolit", "boran", "diboran", "hematit", "magnetit", "pirit"
    ],
    pairs: {
      "Pb₃O₄": "minijum",
      "PbS": "galenit",
      "NaAl₃F₆": "kriolit",
      "BH₃": "boran",
      "B₂H₆": "diboran",
      "Fe₂O₃": "hematit",
      "Fe₃O₄": "magnetit",
      "FS": "pirit"
    }
  }
];


// Funkcija za mešanje niza (Fisher-Yates shuffle)
function shuffle(array) {
  let currentIndex = array.length, randomIndex;

  while (currentIndex != 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // Zamena
    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
  }
  return array;
}

// Izaberi nasumični set
const chosenSet = allSets[Math.floor(Math.random() * allSets.length)];
const leftItems = shuffle([...chosenSet.left]); // kreiraj kopiju i promiješaj
const rightItems = shuffle([...chosenSet.right]);
const pairs = chosenSet.pairs;

const leftColumn = document.getElementById("leftColumn");
const rightColumn = document.getElementById("rightColumn");
let selectedLeft = null;
let selectedRight = null;
let score = 0;
let timeLeft = 90;
let gameEnded = false;
let timerInterval = setInterval(updateTimer, 1000);

  function updateTimer() {
    if(gameEnded) return;
    timeLeft--;
    document.getElementById("timer").innerText = timeLeft;
    if (timeLeft <= 0) {
      endGame();
    }
  }

  function updateScore() {
    document.getElementById("score").innerText = "Bodovi: " + score;
  }

  // Kreiraj levu kolonu
  leftItems.forEach(item => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerText = item;
    div.addEventListener("click", () => selectLeft(div));
    leftColumn.appendChild(div);
  });

  // Kreiraj desnu kolonu
  rightItems.forEach(item => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerText = item;
    div.addEventListener("click", () => selectRight(div));
    rightColumn.appendChild(div);
  });

  function selectLeft(el) {
    if (gameEnded) return;
    if (el.classList.contains("correct")) return;
    if (selectedLeft) selectedLeft.style.borderColor = "#ccc";
    selectedLeft = el;
    el.style.borderColor = "#1d3557";
    checkPair();
  }

  function selectRight(el) {
    if (gameEnded) return;
    if (el.classList.contains("correct")) return;
    if (selectedRight) selectedRight.style.borderColor = "#ccc";
    selectedRight = el;
    el.style.borderColor = "#1d3557";
    checkPair();
  }

  function checkPair() {
  if (selectedLeft && selectedRight) {
    const leftValue = selectedLeft.innerText;
    const rightValue = selectedRight.innerText;

    if (pairs[leftValue] === rightValue) {
      // Tačan odgovor
      selectedLeft.classList.add("correct");
      selectedRight.classList.add("correct");
      selectedLeft.style.pointerEvents = "none";
      selectedRight.style.pointerEvents = "none";
      score += 10;
      updateScore();
    } else {
      // Pogrešan odgovor - trajno onemogući klik
      selectedLeft.classList.add("wrong");
      selectedRight.classList.add("wrong");
      selectedLeft.style.pointerEvents = "none";
      selectedRight.style.pointerEvents = "none";
    }

    // Vraćamo boju ivice na početnu (možeš i dodati animaciju ako želiš)
    selectedLeft.style.borderColor = "#ccc";
    selectedRight.style.borderColor = "#ccc";

    // Resetujemo selekcije
    selectedLeft = null;
    selectedRight = null;

    // Provera da li je kraj igre
    checkEndGame();
  }
}

function checkEndGame() {
  const totalMatched = document.querySelectorAll(".item.correct, .item.wrong").length;
  if (totalMatched === leftItems.length + rightItems.length) {
    endGame();
  }
}


function endGame() {
  gameEnded = true;
  clearInterval(timerInterval);
  localStorage.setItem('spojniceScore', score);
  localStorage.setItem('score', score);  // Čuvanje rezultata u localStorage
  document.getElementById("finalScore").innerText = "Osvojili ste " + score + " bodova.";
  document.getElementById("resultModal").style.display = "flex";
}


// Dugme za povratak na meni
document.getElementById("btnToStart").addEventListener("click", () => {
  window.location.href = "../igra.html"; // promijeni putanju po potrebi
});

</script>

</body>
</html>